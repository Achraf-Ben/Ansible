---
# tasks file for appserver
- name: Update apt cache
  apt: update_cache=yes cache_valid_time=3600
  become: yes
  become_method: sudo

- name: Install required software
  apt: name={{ item }} state=present
  become: yes
  become_method: sudo
  with_items:
    - python3-simplejson
    - apache2
    - mysql-server
    - php
    - libapache2-mod-php
    - php-mcrypt
    - python-mysqldb

- name: Install php extensions
  apt: name={{ item }} state=present
  become: yes
  become_method: sudo
  with_items:
    - php-mysql
    - php-cli
    - php-curl
    - php-gd
    - php-xml
    - php-mbstring
    - php-fpm

- name: Install required software packages
  apt: name={{ item }} state=present
  become: yes
  become_method: sudo
  with_items:
    - bc
    - tar
    - sudo
    - wget
    - curl
    - git
    - htop
    - coreutils
    - libssl-dev
    - lsb-release
    - python3-dev
    - python3-pip
    - ca-certificates
    - apt-transport-https
    - python-software-properties
    - software-properties-common
    - libmysqlclient-dev

- name: Installing PIP software, Hold on...
  become: yes
  become_method: sudo
  pip: name=pip state=latest

- name: Installing passlib software, Hold on...
  become: yes
  become_method: sudo
  pip: name=passlib state=present

- name: Installing MySQL-python software, Hold on...
  become: yes
  become_method: sudo
  pip: name=MySQL-python state=present




